(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4836:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var l=r(5155),n=r(2115),i=r(5125);let a={tick:{label:"Per Tick",durationMs:3e4,snapshotIntervalMs:50},"1m":{label:"1 Minute",durationMs:6e4,snapshotIntervalMs:100},"5m":{label:"5 Minute",durationMs:3e5,snapshotIntervalMs:500},"15m":{label:"15 Minute",durationMs:9e5,snapshotIntervalMs:1500},"1h":{label:"1 Hour",durationMs:36e5,snapshotIntervalMs:6e3},"4h":{label:"4 Hours",durationMs:144e5,snapshotIntervalMs:24e3},"1d":{label:"1 Day",durationMs:864e5,snapshotIntervalMs:144e3}};function s(e){let{symbol:t}=e,r=(0,n.useRef)(null),[i,s]=(0,n.useState)("tick"),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),h=(0,n.useRef)(i);(0,n.useEffect)(()=>{h.current=i},[i]);let f=(0,n.useRef)({bids:new Map,asks:new Map,midPrice:0,maxSize:0}),m=(0,n.useRef)([]),x=(0,n.useRef)([]),b=(0,n.useRef)({priceRange:50,playheadX:0});return(0,n.useEffect)(()=>{let e,r,l,n=f.current,i=()=>{u(null),(e=new WebSocket("wss://stream.bytick.com/v5/public/linear")).onopen=()=>{c(!0),u(null),e.send(JSON.stringify({op:"subscribe",args:["orderbook.50.".concat(t),"publicTrade.".concat(t)]})),r=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({op:"ping"}))},2e4)},e.onclose=()=>{c(!1),clearInterval(r),l=setTimeout(i,3e3)},e.onerror=t=>{console.warn("WebSocket error:",t),u("Connection error. Retrying..."),e.close()},e.onmessage=e=>{let r=JSON.parse(e.data);if(r.topic==="orderbook.50.".concat(t)){let e=r.data,t=f.current;if("snapshot"===r.type)t.bids.clear(),t.asks.clear(),e.b.forEach(e=>{let[r,l]=e;return t.bids.set(parseFloat(r),parseFloat(l))}),e.a.forEach(e=>{let[r,l]=e;return t.asks.set(parseFloat(r),parseFloat(l))});else if("delta"===r.type){var l,n;null==(l=e.b)||l.forEach(e=>{let[r,l]=e,n=parseFloat(r),i=parseFloat(l);0===i?t.bids.delete(n):t.bids.set(n,i)}),null==(n=e.a)||n.forEach(e=>{let[r,l]=e,n=parseFloat(r),i=parseFloat(l);0===i?t.asks.delete(n):t.asks.set(n,i)})}let i=0,s=1/0,o=0;for(let[e,r]of t.bids.entries())e>i&&(i=e),r>o&&(o=r);for(let[e,r]of t.asks.entries())e<s&&(s=e),r>o&&(o=r);i>0&&s<1/0?t.midPrice=(i+s)/2:i>0?t.midPrice=i:s<1/0&&(t.midPrice=s),t.maxSize=o;let c=Date.now();if(c-(m.current.length>0?m.current[m.current.length-1].time:0)>=a[h.current].snapshotIntervalMs){let e=new Map;for(let[r,l]of t.bids.entries())e.set(r,l);for(let[r,l]of t.asks.entries())e.set(r,l);m.current.push({time:c,levels:e,maxSize:t.maxSize,midPrice:t.midPrice}),m.current.length>2e3&&(m.current=m.current.slice(-2e3))}}else r.topic==="publicTrade.".concat(t)&&(r.data.forEach(e=>{x.current.push({time:e.T,price:parseFloat(e.p),volume:parseFloat(e.v),isBuyerMaker:"Sell"===e.S})}),x.current.length>5e3&&(x.current=x.current.slice(-5e3)))}};return i(),()=>{clearTimeout(l),clearInterval(r),e&&e.close(),n.bids.clear(),n.asks.clear(),m.current=[],x.current=[]}},[t]),(0,n.useEffect)(()=>{let e,t=r.current;if(!t)return;let l=t.getContext("2d",{alpha:!1});if(!l)return;let n=(e,t)=>{let r=Math.min(1,e/(t||1));if(r<.25){let e=Math.floor(r/.25*255);return"rgb(0,0,".concat(e,")")}if(r<.5){let e=Math.floor((r-.25)/.25*255),t=255-Math.floor((r-.25)/.25*255);return"rgb(".concat(e,",0,").concat(t,")")}if(r<.75){let e=Math.floor((r-.5)/.25*255);return"rgb(255,".concat(e,",0)")}{let e=Math.floor((r-.75)/.25*255);return"rgb(255,255,".concat(e,")")}},i=()=>{let r=t.clientWidth,s=t.clientHeight;if(0===r||0===s){e=requestAnimationFrame(i);return}b.current.playheadX=.8*r;let c=b.current.playheadX,d=c/a[h.current].durationMs;l.fillStyle="#050505",l.fillRect(0,0,r,s);let u=f.current;if(0===u.midPrice){l.fillStyle="rgba(255, 255, 255, 0.5)",l.font='14px "JetBrains Mono", monospace',l.textAlign="center",l.fillText(o?"Waiting for orderbook data...":"Connecting to Bybit WebSocket...",r/2,s/2),e=requestAnimationFrame(i);return}let g=u.midPrice-b.current.priceRange,p=u.midPrice+b.current.priceRange,v=e=>s-(e-g)/(p-g)*s,y=Date.now(),w=y-c/d;m.current=m.current.filter(e=>e.time>=w),l.beginPath();let k=!0;for(let e=0;e<m.current.length;e++){let t=m.current[e],r=c-(y-t.time)*d;if(r<0)continue;let i=Math.max(1,(e<m.current.length-1?c-(y-m.current[e+1].time)*d:c)-r);for(let[e,a]of t.levels.entries()){if(e<g||e>p)continue;let s=v(e);l.fillStyle=n(a,t.maxSize),l.fillRect(r,s-2,i+.5,4)}let a=v(t.midPrice);k?(l.moveTo(r,a),k=!1):l.lineTo(r,a)}for(let[e,t]of(k||(l.lineTo(c,v(u.midPrice)),l.strokeStyle="rgba(255, 255, 255, 0.6)",l.lineWidth=1.5,l.stroke()),u.bids.entries())){if(e<g||e>p)continue;let n=v(e),i=Math.min(1,t/(u.maxSize||1)),a=Math.max(2,(r-c)*i);l.fillStyle="rgba(0, 255, 0, ".concat(.3+.7*i,")"),l.fillRect(c,n-1,a,2)}for(let[e,t]of u.asks.entries()){if(e<g||e>p)continue;let n=v(e),i=Math.min(1,t/(u.maxSize||1)),a=Math.max(2,(r-c)*i);l.fillStyle="rgba(255, 0, 0, ".concat(.3+.7*i,")"),l.fillRect(c,n-1,a,2)}for(let e of(x.current=x.current.filter(e=>e.time>=w),x.current)){if(e.price<g||e.price>p)continue;let t=c-(y-e.time)*d,r=v(e.price),n=Math.max(3,Math.min(30,5*Math.sqrt(e.volume)));l.beginPath(),l.arc(t,r,n,0,2*Math.PI),l.fillStyle=e.isBuyerMaker?"rgba(255, 50, 50, 0.6)":"rgba(50, 255, 50, 0.6)",l.fill(),l.lineWidth=1,l.strokeStyle=e.isBuyerMaker?"rgb(255, 0, 0)":"rgb(0, 255, 0)",l.stroke()}l.beginPath(),l.moveTo(c,0),l.lineTo(c,s),l.strokeStyle="rgba(255, 255, 255, 0.8)",l.lineWidth=1,l.setLineDash([4,4]),l.stroke(),l.setLineDash([]);let S=v(u.midPrice);l.beginPath(),l.moveTo(0,S),l.lineTo(r,S),l.strokeStyle="rgba(255, 255, 255, 0.3)",l.stroke(),l.fillStyle="white",l.font='12px "JetBrains Mono", monospace',l.fillText("Mid: ".concat(u.midPrice.toFixed(2)),10,20),l.fillText("Max Vol: ".concat(u.maxSize.toFixed(2)),10,40),l.textAlign="right",l.textBaseline="middle";let M=b.current.priceRange/5;for(let e=g;e<=p;e+=M){let t=v(e);l.fillText(e.toFixed(1),r-10,t)}l.textAlign="left",l.textBaseline="alphabetic",e=requestAnimationFrame(i)};return i(),()=>cancelAnimationFrame(e)},[o]),(0,n.useEffect)(()=>{let e=()=>{if(r.current){let e=r.current.parentElement;if(e){let t=window.devicePixelRatio||1;r.current.width=e.clientWidth*t,r.current.height=e.clientHeight*t;let l=r.current.getContext("2d");l&&(l.setTransform(1,0,0,1,0,0),l.scale(t,t)),r.current.style.width="".concat(e.clientWidth,"px"),r.current.style.height="".concat(e.clientHeight,"px")}}};return window.addEventListener("resize",e),e(),setTimeout(e,100),()=>window.removeEventListener("resize",e)},[]),(0,l.jsxs)("div",{className:"w-full h-full relative bg-[#050505] overflow-hidden",onWheel:e=>{e.preventDefault();let t=e.deltaY>0?1.1:.9;b.current.priceRange=Math.max(10,Math.min(1e3,b.current.priceRange*t))},children:[(0,l.jsx)("canvas",{ref:r,className:"block w-full h-full cursor-crosshair"}),(0,l.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 bg-black/50 p-2 rounded-lg backdrop-blur-sm border border-white/10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(o?"bg-green-500":"bg-red-500")}),(0,l.jsx)("span",{className:"text-xs font-mono text-white/70",children:o?"Connected":"Disconnected"})]}),(0,l.jsx)("div",{className:"h-4 w-px bg-white/20"}),(0,l.jsx)("select",{className:"bg-zinc-900 text-white px-3 py-1.5 rounded text-sm font-mono outline-none border border-white/10 hover:border-white/30 transition-colors",value:i,onChange:e=>s(e.target.value),children:Object.entries(a).map(e=>{let[t,{label:r}]=e;return(0,l.jsx)("option",{value:t,children:r},t)})})]}),d&&(0,l.jsx)("div",{className:"bg-red-500/20 text-red-400 border border-red-500/50 px-3 py-1.5 rounded text-xs font-mono backdrop-blur-sm",children:d})]}),(0,l.jsx)("div",{className:"absolute bottom-4 left-4 text-xs font-mono text-white/50 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Scroll to Zoom Y-Axis"})]})}let o=e=>{let t=e.slice(-1),r=parseInt(e.slice(0,-1));switch(t){case"m":return 60*r*1e3;case"h":return 60*r*6e4;case"d":return 24*r*36e5;case"w":return 7*r*864e5;default:return 6e4}},c=e=>{let{symbol:t,interval:r}=e,a=(0,n.useRef)(null),s=(0,n.useRef)(null),[c,d]=(0,n.useState)(r),[u,h]=(0,n.useState)(!0),f=(0,n.useRef)(!0),m=(0,n.useRef)([]),x=(0,n.useRef)(1),b=(0,n.useRef)({x:0,y:0}),g=(0,n.useRef)({x:100,y:16}),p=(0,n.useRef)(!1),v=(0,n.useRef)(null),y=(0,n.useRef)({x:0,y:0}),w=(0,n.useRef)("Initializing...");(0,n.useEffect)(()=>{let e,r=!0;m.current=[],w.current="Initializing...",g.current={x:100,y:16},b.current={x:0,y:0},h(!0),f.current=!0;let l=new WebSocket("wss://stream.bytick.com/v5/public/linear");return l.onopen=()=>{w.current="WS Connected, waiting for trades...",l.send(JSON.stringify({op:"subscribe",args:["publicTrade.".concat(t)]})),e=window.setInterval(()=>{l.readyState===WebSocket.OPEN&&l.send(JSON.stringify({op:"ping"}))},2e4)},l.onerror=e=>{console.warn("WebSocket error:",e),w.current="WebSocket Error. Retrying..."},l.onclose=()=>{w.current="WebSocket Disconnected."},(async()=>{try{w.current="Fetching tick size...";let e=await i.A.get("https://api.bytick.com/v5/market/tickers?category=linear&symbol=".concat(t)),n=parseFloat(e.data.result.list[0].lastPrice),a=.01;n>1e4?a="1m"===c||"5m"===c?10:"15m"===c||"1h"===c?50:100:n>1e3?a="1m"===c||"5m"===c?1:"15m"===c||"1h"===c?5:10:n>100&&(a=.1),x.current=a;let s="1";"1m"===c?s="1":"5m"===c?s="5":"15m"===c?s="15":"1h"===c?s="60":"4h"===c?s="240":"1d"===c?s="D":"1w"===c&&(s="W"),w.current="Fetching historical klines...";let d=(await i.A.get("https://api.bytick.com/v5/market/kline?category=linear&symbol=".concat(t,"&interval=").concat(s,"&limit=100"))).data.result.list.reverse(),u=new Map;if(d.forEach(e=>{let t=parseInt(e[0]);u.set(t,{time:t,open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5]),levels:new Map,maxVol:0,totalVol:0})}),w.current="Fetching recent trades...",(await i.A.get("https://api.bytick.com/v5/market/recent-trade?category=linear&symbol=".concat(t,"&limit=1000"))).data.result.list.reverse().forEach(e=>{let t=o(c),r=Math.floor(parseInt(e.time)/t)*t,l=parseFloat(e.price),n=parseFloat(e.size),i="Sell"===e.side,s=Math.floor(l/a)*a;if(u.has(r)){let e=u.get(r);e.totalVol+=n,e.levels.has(s)||e.levels.set(s,{bid:0,ask:0});let t=e.levels.get(s);i?t.bid+=n:t.ask+=n;let l=t.bid+t.ask;l>e.maxVol&&(e.maxVol=l)}}),r){if(m.current=Array.from(u.values()).sort((e,t)=>e.time-t.time),m.current.length>0){let e=m.current[m.current.length-1];b.current.y=e.close}l.readyState===WebSocket.OPEN&&(w.current="Connected and syncing...")}}catch(e){console.warn("Footprint init error:",e),w.current="Error: ".concat(e instanceof Error?e.message:"Failed to load data")}})(),l.onmessage=e=>{let r=JSON.parse(e.data);r.topic==="publicTrade.".concat(t)&&(r.data.forEach(e=>{let t=o(c),r=Math.floor(parseInt(e.T)/t)*t,l=parseFloat(e.p),n=parseFloat(e.v),i="Sell"===e.S,a=x.current,s=Math.floor(l/a)*a,d=m.current;(0===d.length||d[d.length-1].time!==r)&&(d.push({time:r,open:l,high:l,low:l,close:l,volume:0,levels:new Map,maxVol:0,totalVol:0}),d.length>200&&d.shift());let u=d[d.length-1];u.close=l,l>u.high&&(u.high=l),l<u.low&&(u.low=l),u.totalVol+=n,u.volume+=n,u.levels.has(s)||u.levels.set(s,{bid:0,ask:0});let h=u.levels.get(s);i?h.bid+=n:h.ask+=n;let f=h.bid+h.ask;f>u.maxVol&&(u.maxVol=f)}),w.current="Live")},()=>{r=!1,clearInterval(e),l.close()}},[t,c]),(0,n.useEffect)(()=>{let e,t=a.current,r=s.current;if(!t||!r)return;let l=t.getContext("2d");if(!l)return;let n=()=>{(t.width!==r.clientWidth||t.height!==r.clientHeight)&&(t.width=r.clientWidth,t.height=r.clientHeight),l.clearRect(0,0,t.width,t.height),l.fillStyle="#050505",l.fillRect(0,0,t.width,t.height);let i=m.current;if(0===i.length){l.fillStyle="rgba(255, 255, 255, 0.5)",l.font="14px monospace",l.textAlign="center",l.fillText(w.current,t.width/2,t.height/2),e=requestAnimationFrame(n);return}if(f.current&&i.length>0){b.current.x=0;let e=i[i.length-1].close;b.current.y+=(e-b.current.y)*.1}let a=g.current.x,s=g.current.y,o=x.current,d=t.height/2,u=e=>d-(e-b.current.y)/o*s;l.fillStyle="Live"===w.current?"#00ff00":w.current.includes("Error")||w.current.includes("Disconnect")?"#ff0000":"#ff9800",l.beginPath(),l.arc(20,20,5,0,2*Math.PI),l.fill(),l.fillStyle="#ffffff",l.font="12px sans-serif",l.textAlign="left",l.fillText(w.current,32,24),l.strokeStyle="rgba(255, 255, 255, 0.03)",l.lineWidth=1,i.forEach((e,r)=>{let n=t.width-(i.length-r)*(a+10)+b.current.x-60;if(n+a<0||n>t.width)return;let c=n+a/2,d=e.close>=e.open?"#26a69a":"#ef5350",h=u(e.high),f=u(e.low);l.strokeStyle=d,l.lineWidth=2,l.beginPath(),l.moveTo(c,h),l.lineTo(c,f),l.stroke();let m=u(e.open),x=u(e.close),g=Math.min(m,x),p=Math.max(m,x);if(l.fillStyle=d,a<40){let e=Math.max(.8*a,2);l.fillRect(c-e/2,g,e,Math.max(p-g,2))}else l.fillRect(c-3,g,6,Math.max(p-g,2));a>=40&&e.levels.forEach((r,n)=>{var i,d;let h=u(n);if(h<-s||h>t.height+s)return;let f=Math.round((n+o)*1e5)/1e5,m=Math.round((n-o)*1e5)/1e5,x=(null==(i=e.levels.get(f))?void 0:i.ask)||0,b=(null==(d=e.levels.get(m))?void 0:d.bid)||0,g=r.bid>3*x&&r.bid>0,p=r.ask>3*b&&r.ask>0,v=Math.min(1,r.bid/(e.maxVol||1)*2.5),y=Math.min(1,r.ask/(e.maxVol||1)*2.5),w=a/2-8,k=w*v;l.fillStyle="rgba(239, 83, 80, 0.3)",l.fillRect(c-4-k,h-s/2+1,k,s-2),l.fillStyle="rgba(38, 166, 154, 0.3)",l.fillRect(c+4,h-s/2+1,w*y,s-2);let S=e=>0===e?"0":e>1e3?(e/1e3).toFixed(1)+"k":e.toFixed(1),M=S(r.bid),j=S(r.ask);l.textBaseline="middle",s>=12&&a>=60&&(l.textAlign="right",l.font=g?"bold 11px monospace":"11px monospace",l.fillStyle=g?"#ffeb3b":r.bid>0?"#ffffff":"#787b86",l.fillText(M,c-6,h),l.textAlign="left",l.font=p?"bold 11px monospace":"11px monospace",l.fillStyle=p?"#ffeb3b":r.ask>0?"#ffffff":"#787b86",l.fillText(j,c+6,h)),g&&(l.strokeStyle="rgba(255, 235, 59, 0.8)",l.lineWidth=1,l.strokeRect(c-4-w,h-s/2+1,w,s-2)),p&&(l.strokeStyle="rgba(255, 235, 59, 0.8)",l.lineWidth=1,l.strokeRect(c+4,h-s/2+1,w,s-2))})}),l.fillStyle="#1e222d",l.fillRect(0,t.height-20,t.width-60,20),l.fillStyle="#787b86",l.font="10px sans-serif",l.textAlign="center",l.textBaseline="middle",i.forEach((e,r)=>{let n=t.width-(i.length-r)*(a+10)+b.current.x-60;if(n+a<0||n>t.width)return;let s=new Date(e.time),o="".concat(s.getHours(),":").concat(s.getMinutes().toString().padStart(2,"0"));(c.endsWith("d")||c.endsWith("w"))&&(o="".concat(s.getDate(),"/").concat(s.getMonth()+1)),l.fillText(o,n+a/2,t.height-10)}),l.fillStyle="#1e222d",l.fillRect(t.width-60,0,60,t.height),l.fillStyle="#d1d4dc",l.font="12px monospace",l.textAlign="left",l.textBaseline="middle";let h=b.current.y-d/s*o,p=b.current.y+d/s*o,v=o*Math.ceil(t.height/s/20),y=Math.floor(h/v)*v;for(let e=y;e<=p;e+=v){let r=u(e);l.fillText(e.toFixed(2*(o<1)),t.width-55,r),l.strokeStyle="rgba(255, 255, 255, 0.05)",l.beginPath(),l.moveTo(0,r),l.lineTo(t.width-60,r),l.stroke()}if(i.length>0){let e=i[i.length-1].close,r=u(e);l.strokeStyle="#2962FF",l.setLineDash([5,5]),l.lineWidth=1,l.beginPath(),l.moveTo(0,r),l.lineTo(t.width-60,r),l.stroke(),l.setLineDash([]),l.fillStyle="#2962FF",l.fillRect(t.width-60,r-10,60,20),l.fillStyle="#ffffff",l.textAlign="left",l.fillText(e.toFixed(2*(o<1)),t.width-55,r)}e=requestAnimationFrame(n)};return n(),()=>cancelAnimationFrame(e)},[c]);let k=()=>{p.current=!1,v.current=null,s.current&&(s.current.style.cursor="crosshair")};return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col bg-[#050505] text-white overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-4 py-2 border-b border-white/10 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("h2",{className:"text-sm font-bold text-gray-300",children:["Footprint Chart (",t,")"]}),(0,l.jsxs)("select",{className:"bg-[#111] text-gray-300 px-2 py-1 text-xs rounded border border-white/10 outline-none hover:border-white/20 transition-colors",value:c,onChange:e=>d(e.target.value),children:[(0,l.jsx)("option",{value:"1m",children:"1 Minute"}),(0,l.jsx)("option",{value:"5m",children:"5 Minutes"}),(0,l.jsx)("option",{value:"15m",children:"15 Minutes"}),(0,l.jsx)("option",{value:"1h",children:"1 Hour"}),(0,l.jsx)("option",{value:"4h",children:"4 Hours"}),(0,l.jsx)("option",{value:"1d",children:"1 Day"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"Drag to pan, Scroll to move, Ctrl+Scroll to zoom"}),(0,l.jsx)("button",{onClick:()=>{f.current=!u,h(!u)},className:"px-3 py-1 text-xs rounded font-medium transition-colors ".concat(u?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:u?"Auto Scroll: ON":"Auto Scroll: OFF"})]})]}),(0,l.jsx)("div",{ref:s,className:"flex-1 relative",onMouseDown:e=>{var t;let r=null==(t=s.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;l>r.width-60?v.current="zoomY":n>r.height-20?v.current="zoomX":v.current="pan",p.current=!0,y.current={x:e.clientX,y:e.clientY},f.current=!1,h(!1)},onMouseMove:e=>{var t;let r=null==(t=s.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;if(!p.current)return void(l>r.width-60?s.current.style.cursor="ns-resize":n>r.height-20?s.current.style.cursor="ew-resize":s.current.style.cursor="crosshair");let i=e.clientX-y.current.x,a=e.clientY-y.current.y;if("pan"===v.current){s.current.style.cursor="grabbing",b.current.x+=i;let e=a/g.current.y*x.current;b.current.y+=e}else"zoomY"===v.current?g.current.y=Math.max(1,Math.min(100,g.current.y*(1-.01*a))):"zoomX"===v.current&&(g.current.x=Math.max(10,Math.min(300,g.current.x*(1+.01*i))));y.current={x:e.clientX,y:e.clientY}},onMouseUp:k,onMouseLeave:k,onWheel:e=>{var t;e.preventDefault();let r=null==(t=s.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;if(f.current=!1,h(!1),l>r.width-60){let t=e.deltaY>0?.9:1.1;g.current.y=Math.max(1,Math.min(100,g.current.y*t))}else if(n>r.height-20){let t=e.deltaY>0?.9:1.1;g.current.x=Math.max(10,Math.min(300,g.current.x*t))}else{let t=e.deltaY>0?.9:1.1;g.current.x=Math.max(10,Math.min(300,g.current.x*t))}},children:(0,l.jsx)("canvas",{ref:a,className:"absolute inset-0 block"})})]})};var d=r(9540),u=r(6651),h=r(5229),f=r(906),m=r(5664);function x(){let[e,t]=(0,n.useState)("heatmap"),[r,a]=(0,n.useState)(!1),[o,x]=(0,n.useState)("BTCUSDT"),[b,g]=(0,n.useState)(["BTCUSDT","ETHUSDT","SOLUSDT","XRPUSDT","XAUUSDT"]),[p,v]=(0,n.useState)(!1),[y,w]=(0,n.useState)("");(0,n.useEffect)(()=>{i.A.get("https://api.bytick.com/v5/market/instruments-info?category=linear").then(e=>{if(e.data&&e.data.result&&e.data.result.list){let t=e.data.result.list.map(e=>e.symbol);t.sort(),g(t)}}).catch(e=>console.error("Failed to fetch symbols",e))},[]);let k=b.filter(e=>e.toLowerCase().includes(y.toLowerCase()));return(0,l.jsxs)("main",{className:"w-screen h-screen bg-[#050505] text-white flex flex-col overflow-hidden",children:[(0,l.jsxs)("header",{className:"px-6 py-3 border-b border-white/10 flex justify-between items-center bg-black/40 backdrop-blur-md z-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>a(!0),className:"p-1.5 hover:bg-white/10 rounded transition-colors text-gray-400 hover:text-white",children:(0,l.jsx)(d.A,{size:20})}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-emerald-500 rounded-sm shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),(0,l.jsx)("h1",{className:"text-lg font-medium tracking-tight font-sans",children:"heatmap"===e?"Order Flow Heatmap":"Footprint Chart"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("button",{onClick:()=>v(!0),className:"bg-zinc-900 border border-white/10 hover:border-white/30 text-white px-4 py-1.5 rounded-md text-sm font-mono transition-colors flex items-center gap-2",children:[(0,l.jsx)("span",{children:o}),(0,l.jsx)(u.A,{size:14,className:"text-gray-400"})]}),(0,l.jsx)("div",{className:"text-xs font-mono text-zinc-400 tracking-wider uppercase hidden sm:block",children:"Bybit V5 WebSocket"})]})]}),(0,l.jsx)("div",{className:"flex-1 relative",children:"heatmap"===e?(0,l.jsx)(s,{symbol:o}):(0,l.jsx)(c,{symbol:o,interval:"1m"})}),r&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center",onClick:()=>a(!1),children:(0,l.jsxs)("div",{className:"bg-[#131722] border border-white/10 rounded-xl w-80 overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-white/10 flex justify-between items-center bg-black/20",children:[(0,l.jsx)("h2",{className:"font-semibold text-gray-200",children:"Select View"}),(0,l.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:(0,l.jsx)(h.A,{size:18})})]}),(0,l.jsxs)("div",{className:"p-2 flex flex-col gap-1",children:[(0,l.jsxs)("button",{onClick:()=>{t("heatmap"),a(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat("heatmap"===e?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-gray-300"),children:[(0,l.jsx)(f.A,{size:18}),(0,l.jsx)("span",{className:"font-medium",children:"Order Flow Heatmap"})]}),(0,l.jsxs)("button",{onClick:()=>{t("footprint"),a(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat("footprint"===e?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-gray-300"),children:[(0,l.jsx)(m.A,{size:18}),(0,l.jsx)("span",{className:"font-medium",children:"Footprint Chart"})]})]})]})}),p&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center",onClick:()=>v(!1),children:(0,l.jsxs)("div",{className:"bg-[#131722] border border-white/10 rounded-xl w-96 max-h-[80vh] flex flex-col overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-white/10 flex justify-between items-center bg-black/20",children:[(0,l.jsx)("h2",{className:"font-semibold text-gray-200",children:"Select Pair"}),(0,l.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white",children:(0,l.jsx)(h.A,{size:18})})]}),(0,l.jsx)("div",{className:"p-3 border-b border-white/10",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(u.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),(0,l.jsx)("input",{type:"text",placeholder:"Search pairs (e.g. XAUUSDT)",className:"w-full bg-black/40 border border-white/10 rounded-lg py-2 pl-9 pr-4 text-sm text-white outline-none focus:border-blue-500 transition-colors",value:y,onChange:e=>w(e.target.value),autoFocus:!0})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:k.length>0?(0,l.jsx)("div",{className:"grid grid-cols-2 gap-1",children:k.map(e=>(0,l.jsx)("button",{onClick:()=>{x(e),v(!1)},className:"text-left px-3 py-2 rounded-md text-sm font-mono transition-colors ".concat(o===e?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-gray-300"),children:e},e))}):(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No pairs found matching "',y,'"']})})]})})]})}},6466:(e,t,r)=>{Promise.resolve().then(r.bind(r,4836))}},e=>{e.O(0,[284,441,255,358],()=>e(e.s=6466)),_N_E=e.O()}]);
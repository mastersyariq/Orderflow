(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4569:(e,t,r)=>{Promise.resolve().then(r.bind(r,4836))},4836:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var l=r(5155),n=r(2115);let i={tick:{label:"Per Tick",durationMs:3e4,snapshotIntervalMs:50},"1m":{label:"1 Minute",durationMs:6e4,snapshotIntervalMs:100},"5m":{label:"5 Minute",durationMs:3e5,snapshotIntervalMs:500},"15m":{label:"15 Minute",durationMs:9e5,snapshotIntervalMs:1500},"1h":{label:"1 Hour",durationMs:36e5,snapshotIntervalMs:6e3},"4h":{label:"4 Hours",durationMs:144e5,snapshotIntervalMs:24e3},"1d":{label:"1 Day",durationMs:864e5,snapshotIntervalMs:144e3}};function a(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)("BTCUSDT"),[a,s]=(0,n.useState)("tick"),[o,c]=(0,n.useState)(!1),[u,d]=(0,n.useState)(null),h=(0,n.useRef)(a);(0,n.useEffect)(()=>{h.current=a},[a]);let f=(0,n.useRef)({bids:new Map,asks:new Map,midPrice:0,maxSize:0}),m=(0,n.useRef)([]),x=(0,n.useRef)([]),g=(0,n.useRef)({priceRange:50,playheadX:0});return(0,n.useEffect)(()=>{let e,r,l,n=f.current,a=()=>{d(null),(e=new WebSocket("wss://stream.bytick.com/v5/public/linear")).onopen=()=>{c(!0),d(null),e.send(JSON.stringify({op:"subscribe",args:["orderbook.50.".concat(t),"publicTrade.".concat(t)]})),r=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({op:"ping"}))},2e4)},e.onclose=()=>{c(!1),clearInterval(r),l=setTimeout(a,3e3)},e.onerror=t=>{console.warn("WebSocket error:",t),d("Connection error. Retrying..."),e.close()},e.onmessage=e=>{let r=JSON.parse(e.data);if(r.topic==="orderbook.50.".concat(t)){let e=r.data,t=f.current;if("snapshot"===r.type)t.bids.clear(),t.asks.clear(),e.b.forEach(e=>{let[r,l]=e;return t.bids.set(parseFloat(r),parseFloat(l))}),e.a.forEach(e=>{let[r,l]=e;return t.asks.set(parseFloat(r),parseFloat(l))});else if("delta"===r.type){var l,n;null==(l=e.b)||l.forEach(e=>{let[r,l]=e,n=parseFloat(r),i=parseFloat(l);0===i?t.bids.delete(n):t.bids.set(n,i)}),null==(n=e.a)||n.forEach(e=>{let[r,l]=e,n=parseFloat(r),i=parseFloat(l);0===i?t.asks.delete(n):t.asks.set(n,i)})}let a=0,s=1/0,o=0;for(let[e,r]of t.bids.entries())e>a&&(a=e),r>o&&(o=r);for(let[e,r]of t.asks.entries())e<s&&(s=e),r>o&&(o=r);a>0&&s<1/0?t.midPrice=(a+s)/2:a>0?t.midPrice=a:s<1/0&&(t.midPrice=s),t.maxSize=o;let c=Date.now();if(c-(m.current.length>0?m.current[m.current.length-1].time:0)>=i[h.current].snapshotIntervalMs){let e=new Map;for(let[r,l]of t.bids.entries())e.set(r,l);for(let[r,l]of t.asks.entries())e.set(r,l);m.current.push({time:c,levels:e,maxSize:t.maxSize,midPrice:t.midPrice}),m.current.length>2e3&&(m.current=m.current.slice(-2e3))}}else r.topic==="publicTrade.".concat(t)&&(r.data.forEach(e=>{x.current.push({time:e.T,price:parseFloat(e.p),volume:parseFloat(e.v),isBuyerMaker:"Sell"===e.S})}),x.current.length>5e3&&(x.current=x.current.slice(-5e3)))}};return a(),()=>{clearTimeout(l),clearInterval(r),e&&e.close(),n.bids.clear(),n.asks.clear(),m.current=[],x.current=[]}},[t]),(0,n.useEffect)(()=>{let t,r=e.current;if(!r)return;let l=r.getContext("2d",{alpha:!1});if(!l)return;let n=(e,t)=>{let r=Math.min(1,e/(t||1));if(r<.25){let e=Math.floor(r/.25*255);return"rgb(0,0,".concat(e,")")}if(r<.5){let e=Math.floor((r-.25)/.25*255),t=255-Math.floor((r-.25)/.25*255);return"rgb(".concat(e,",0,").concat(t,")")}if(r<.75){let e=Math.floor((r-.5)/.25*255);return"rgb(255,".concat(e,",0)")}{let e=Math.floor((r-.75)/.25*255);return"rgb(255,255,".concat(e,")")}},a=()=>{let e=r.clientWidth,s=r.clientHeight;if(0===e||0===s){t=requestAnimationFrame(a);return}g.current.playheadX=.8*e;let c=g.current.playheadX,u=c/i[h.current].durationMs;l.fillStyle="#050505",l.fillRect(0,0,e,s);let d=f.current;if(0===d.midPrice){l.fillStyle="rgba(255, 255, 255, 0.5)",l.font='14px "JetBrains Mono", monospace',l.textAlign="center",l.fillText(o?"Waiting for orderbook data...":"Connecting to Bybit WebSocket...",e/2,s/2),t=requestAnimationFrame(a);return}let p=d.midPrice-g.current.priceRange,b=d.midPrice+g.current.priceRange,v=e=>s-(e-p)/(b-p)*s,y=Date.now(),w=y-c/u;m.current=m.current.filter(e=>e.time>=w),l.beginPath();let k=!0;for(let e=0;e<m.current.length;e++){let t=m.current[e],r=c-(y-t.time)*u;if(r<0)continue;let i=Math.max(1,(e<m.current.length-1?c-(y-m.current[e+1].time)*u:c)-r);for(let[e,a]of t.levels.entries()){if(e<p||e>b)continue;let s=v(e);l.fillStyle=n(a,t.maxSize),l.fillRect(r,s-2,i+.5,4)}let a=v(t.midPrice);k?(l.moveTo(r,a),k=!1):l.lineTo(r,a)}for(let[t,r]of(k||(l.lineTo(c,v(d.midPrice)),l.strokeStyle="rgba(255, 255, 255, 0.6)",l.lineWidth=1.5,l.stroke()),d.bids.entries())){if(t<p||t>b)continue;let n=v(t),i=Math.min(1,r/(d.maxSize||1)),a=Math.max(2,(e-c)*i);l.fillStyle="rgba(0, 255, 0, ".concat(.3+.7*i,")"),l.fillRect(c,n-1,a,2)}for(let[t,r]of d.asks.entries()){if(t<p||t>b)continue;let n=v(t),i=Math.min(1,r/(d.maxSize||1)),a=Math.max(2,(e-c)*i);l.fillStyle="rgba(255, 0, 0, ".concat(.3+.7*i,")"),l.fillRect(c,n-1,a,2)}for(let e of(x.current=x.current.filter(e=>e.time>=w),x.current)){if(e.price<p||e.price>b)continue;let t=c-(y-e.time)*u,r=v(e.price),n=Math.max(3,Math.min(30,5*Math.sqrt(e.volume)));l.beginPath(),l.arc(t,r,n,0,2*Math.PI),l.fillStyle=e.isBuyerMaker?"rgba(255, 50, 50, 0.6)":"rgba(50, 255, 50, 0.6)",l.fill(),l.lineWidth=1,l.strokeStyle=e.isBuyerMaker?"rgb(255, 0, 0)":"rgb(0, 255, 0)",l.stroke()}l.beginPath(),l.moveTo(c,0),l.lineTo(c,s),l.strokeStyle="rgba(255, 255, 255, 0.8)",l.lineWidth=1,l.setLineDash([4,4]),l.stroke(),l.setLineDash([]);let S=v(d.midPrice);l.beginPath(),l.moveTo(0,S),l.lineTo(e,S),l.strokeStyle="rgba(255, 255, 255, 0.3)",l.stroke(),l.fillStyle="white",l.font='12px "JetBrains Mono", monospace',l.fillText("Mid: ".concat(d.midPrice.toFixed(2)),10,20),l.fillText("Max Vol: ".concat(d.maxSize.toFixed(2)),10,40),l.textAlign="right",l.textBaseline="middle";let M=g.current.priceRange/5;for(let t=p;t<=b;t+=M){let r=v(t);l.fillText(t.toFixed(1),e-10,r)}l.textAlign="left",l.textBaseline="alphabetic",t=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(t)},[o]),(0,n.useEffect)(()=>{let t=()=>{if(e.current){let t=e.current.parentElement;if(t){let r=window.devicePixelRatio||1;e.current.width=t.clientWidth*r,e.current.height=t.clientHeight*r;let l=e.current.getContext("2d");l&&(l.setTransform(1,0,0,1,0,0),l.scale(r,r)),e.current.style.width="".concat(t.clientWidth,"px"),e.current.style.height="".concat(t.clientHeight,"px")}}};return window.addEventListener("resize",t),t(),setTimeout(t,100),()=>window.removeEventListener("resize",t)},[]),(0,l.jsxs)("div",{className:"w-full h-full relative bg-[#050505] overflow-hidden",onWheel:e=>{e.preventDefault();let t=e.deltaY>0?1.1:.9;g.current.priceRange=Math.max(10,Math.min(1e3,g.current.priceRange*t))},children:[(0,l.jsx)("canvas",{ref:e,className:"block w-full h-full cursor-crosshair"}),(0,l.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 bg-black/50 p-2 rounded-lg backdrop-blur-sm border border-white/10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(o?"bg-green-500":"bg-red-500")}),(0,l.jsx)("span",{className:"text-xs font-mono text-white/70",children:o?"Connected":"Disconnected"})]}),(0,l.jsx)("div",{className:"h-4 w-px bg-white/20"}),(0,l.jsx)("select",{className:"bg-zinc-900 text-white px-3 py-1.5 rounded text-sm font-mono outline-none border border-white/10 hover:border-white/30 transition-colors",value:a,onChange:e=>s(e.target.value),children:Object.entries(i).map(e=>{let[t,{label:r}]=e;return(0,l.jsx)("option",{value:t,children:r},t)})}),(0,l.jsxs)("select",{className:"bg-zinc-900 text-white px-3 py-1.5 rounded text-sm font-mono outline-none border border-white/10 hover:border-white/30 transition-colors",value:t,onChange:e=>r(e.target.value),children:[(0,l.jsx)("option",{value:"BTCUSDT",children:"BTCUSDT"}),(0,l.jsx)("option",{value:"ETHUSDT",children:"ETHUSDT"}),(0,l.jsx)("option",{value:"SOLUSDT",children:"SOLUSDT"}),(0,l.jsx)("option",{value:"XRPUSDT",children:"XRPUSDT"})]})]}),u&&(0,l.jsx)("div",{className:"bg-red-500/20 text-red-400 border border-red-500/50 px-3 py-1.5 rounded text-xs font-mono backdrop-blur-sm",children:u})]}),(0,l.jsx)("div",{className:"absolute bottom-4 left-4 text-xs font-mono text-white/50 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Scroll to Zoom Y-Axis"})]})}var s=r(5125);let o=e=>{let t=e.slice(-1),r=parseInt(e.slice(0,-1));switch(t){case"m":return 60*r*1e3;case"h":return 60*r*6e4;case"d":return 24*r*36e5;case"w":return 7*r*864e5;default:return 6e4}},c=e=>{let{symbol:t,interval:r}=e,i=(0,n.useRef)(null),a=(0,n.useRef)(null),[c,u]=(0,n.useState)(r),[d,h]=(0,n.useState)(!0),f=(0,n.useRef)(!0),m=(0,n.useRef)([]),x=(0,n.useRef)(1),g=(0,n.useRef)({x:0,y:0}),p=(0,n.useRef)({x:100,y:16}),b=(0,n.useRef)(!1),v=(0,n.useRef)(null),y=(0,n.useRef)({x:0,y:0}),w=(0,n.useRef)("Initializing...");(0,n.useEffect)(()=>{let e,r=!0;m.current=[],w.current="Initializing...",p.current={x:100,y:16},g.current={x:0,y:0},h(!0),f.current=!0;let l=new WebSocket("wss://stream.bytick.com/v5/public/linear");return l.onopen=()=>{w.current="WS Connected, waiting for trades...",l.send(JSON.stringify({op:"subscribe",args:["publicTrade.".concat(t)]})),e=window.setInterval(()=>{l.readyState===WebSocket.OPEN&&l.send(JSON.stringify({op:"ping"}))},2e4)},l.onerror=e=>{console.warn("WebSocket error:",e),w.current="WebSocket Error. Retrying..."},l.onclose=()=>{w.current="WebSocket Disconnected."},(async()=>{try{w.current="Fetching tick size...";let e=await s.A.get("https://api.bytick.com/v5/market/tickers?category=linear&symbol=".concat(t)),n=parseFloat(e.data.result.list[0].lastPrice),i=.01;n>1e4?i="1m"===c||"5m"===c?10:"15m"===c||"1h"===c?50:100:n>1e3?i="1m"===c||"5m"===c?1:"15m"===c||"1h"===c?5:10:n>100&&(i=.1),x.current=i;let a="1";"1m"===c?a="1":"5m"===c?a="5":"15m"===c?a="15":"1h"===c?a="60":"4h"===c?a="240":"1d"===c?a="D":"1w"===c&&(a="W"),w.current="Fetching historical klines...";let u=(await s.A.get("https://api.bytick.com/v5/market/kline?category=linear&symbol=".concat(t,"&interval=").concat(a,"&limit=100"))).data.result.list.reverse(),d=new Map;if(u.forEach(e=>{let t=parseInt(e[0]);d.set(t,{time:t,open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5]),levels:new Map,maxVol:0,totalVol:0})}),w.current="Fetching recent trades...",(await s.A.get("https://api.bytick.com/v5/market/recent-trade?category=linear&symbol=".concat(t,"&limit=1000"))).data.result.list.reverse().forEach(e=>{let t=o(c),r=Math.floor(parseInt(e.time)/t)*t,l=parseFloat(e.price),n=parseFloat(e.size),a="Sell"===e.side,s=Math.floor(l/i)*i;if(d.has(r)){let e=d.get(r);e.totalVol+=n,e.levels.has(s)||e.levels.set(s,{bid:0,ask:0});let t=e.levels.get(s);a?t.bid+=n:t.ask+=n;let l=t.bid+t.ask;l>e.maxVol&&(e.maxVol=l)}}),r){if(m.current=Array.from(d.values()).sort((e,t)=>e.time-t.time),m.current.length>0){let e=m.current[m.current.length-1];g.current.y=e.close}l.readyState===WebSocket.OPEN&&(w.current="Connected and syncing...")}}catch(e){console.warn("Footprint init error:",e),w.current="Error: ".concat(e instanceof Error?e.message:"Failed to load data")}})(),l.onmessage=e=>{let r=JSON.parse(e.data);r.topic==="publicTrade.".concat(t)&&(r.data.forEach(e=>{let t=o(c),r=Math.floor(parseInt(e.T)/t)*t,l=parseFloat(e.p),n=parseFloat(e.v),i="Sell"===e.S,a=x.current,s=Math.floor(l/a)*a,u=m.current;(0===u.length||u[u.length-1].time!==r)&&(u.push({time:r,open:l,high:l,low:l,close:l,volume:0,levels:new Map,maxVol:0,totalVol:0}),u.length>200&&u.shift());let d=u[u.length-1];d.close=l,l>d.high&&(d.high=l),l<d.low&&(d.low=l),d.totalVol+=n,d.volume+=n,d.levels.has(s)||d.levels.set(s,{bid:0,ask:0});let h=d.levels.get(s);i?h.bid+=n:h.ask+=n;let f=h.bid+h.ask;f>d.maxVol&&(d.maxVol=f)}),w.current="Live")},()=>{r=!1,clearInterval(e),l.close()}},[t,c]),(0,n.useEffect)(()=>{let e,t=i.current,r=a.current;if(!t||!r)return;let l=t.getContext("2d");if(!l)return;let n=()=>{(t.width!==r.clientWidth||t.height!==r.clientHeight)&&(t.width=r.clientWidth,t.height=r.clientHeight),l.clearRect(0,0,t.width,t.height),l.fillStyle="#050505",l.fillRect(0,0,t.width,t.height);let i=m.current;if(0===i.length){l.fillStyle="rgba(255, 255, 255, 0.5)",l.font="14px monospace",l.textAlign="center",l.fillText(w.current,t.width/2,t.height/2),e=requestAnimationFrame(n);return}if(f.current&&i.length>0){g.current.x=0;let e=i[i.length-1].close;g.current.y+=(e-g.current.y)*.1}let a=p.current.x,s=p.current.y,o=x.current,u=t.height/2,d=e=>u-(e-g.current.y)/o*s;l.fillStyle="Live"===w.current?"#00ff00":w.current.includes("Error")||w.current.includes("Disconnect")?"#ff0000":"#ff9800",l.beginPath(),l.arc(20,20,5,0,2*Math.PI),l.fill(),l.fillStyle="#ffffff",l.font="12px sans-serif",l.textAlign="left",l.fillText(w.current,32,24),l.strokeStyle="rgba(255, 255, 255, 0.03)",l.lineWidth=1,i.forEach((e,r)=>{let n=t.width-(i.length-r)*(a+10)+g.current.x-60;if(n+a<0||n>t.width)return;let c=n+a/2,u=e.close>=e.open?"#26a69a":"#ef5350",h=d(e.high),f=d(e.low);l.strokeStyle=u,l.lineWidth=2,l.beginPath(),l.moveTo(c,h),l.lineTo(c,f),l.stroke();let m=d(e.open),x=d(e.close),p=Math.min(m,x),b=Math.max(m,x);l.fillStyle=u,l.fillRect(c-3,p,6,Math.max(b-p,2)),e.levels.forEach((r,n)=>{var i,u;let h=d(n);if(h<-s||h>t.height+s)return;let f=Math.round((n+o)*1e5)/1e5,m=Math.round((n-o)*1e5)/1e5,x=(null==(i=e.levels.get(f))?void 0:i.ask)||0,g=(null==(u=e.levels.get(m))?void 0:u.bid)||0,p=r.bid>3*x&&r.bid>0,b=r.ask>3*g&&r.ask>0,v=Math.min(1,r.bid/(e.maxVol||1)*2.5),y=Math.min(1,r.ask/(e.maxVol||1)*2.5),w=a/2-8,k=w*v;l.fillStyle="rgba(239, 83, 80, 0.3)",l.fillRect(c-4-k,h-s/2+1,k,s-2),l.fillStyle="rgba(38, 166, 154, 0.3)",l.fillRect(c+4,h-s/2+1,w*y,s-2);let S=e=>0===e?"0":e>1e3?(e/1e3).toFixed(1)+"k":e.toFixed(1),M=S(r.bid),j=S(r.ask);l.textBaseline="middle",s>=12&&a>=60&&(l.textAlign="right",l.font=p?"bold 11px monospace":"11px monospace",l.fillStyle=p?"#ffeb3b":r.bid>0?"#ffffff":"#787b86",l.fillText(M,c-6,h),l.textAlign="left",l.font=b?"bold 11px monospace":"11px monospace",l.fillStyle=b?"#ffeb3b":r.ask>0?"#ffffff":"#787b86",l.fillText(j,c+6,h)),p&&(l.strokeStyle="rgba(255, 235, 59, 0.8)",l.lineWidth=1,l.strokeRect(c-4-w,h-s/2+1,w,s-2)),b&&(l.strokeStyle="rgba(255, 235, 59, 0.8)",l.lineWidth=1,l.strokeRect(c+4,h-s/2+1,w,s-2))})}),l.fillStyle="#1e222d",l.fillRect(0,t.height-20,t.width-60,20),l.fillStyle="#787b86",l.font="10px sans-serif",l.textAlign="center",l.textBaseline="middle",i.forEach((e,r)=>{let n=t.width-(i.length-r)*(a+10)+g.current.x-60;if(n+a<0||n>t.width)return;let s=new Date(e.time),o="".concat(s.getHours(),":").concat(s.getMinutes().toString().padStart(2,"0"));(c.endsWith("d")||c.endsWith("w"))&&(o="".concat(s.getDate(),"/").concat(s.getMonth()+1)),l.fillText(o,n+a/2,t.height-10)}),l.fillStyle="#1e222d",l.fillRect(t.width-60,0,60,t.height),l.fillStyle="#d1d4dc",l.font="12px monospace",l.textAlign="left",l.textBaseline="middle";let h=g.current.y-u/s*o,b=g.current.y+u/s*o,v=o*Math.ceil(t.height/s/20),y=Math.floor(h/v)*v;for(let e=y;e<=b;e+=v){let r=d(e);l.fillText(e.toFixed(2*(o<1)),t.width-55,r),l.strokeStyle="rgba(255, 255, 255, 0.05)",l.beginPath(),l.moveTo(0,r),l.lineTo(t.width-60,r),l.stroke()}if(i.length>0){let e=i[i.length-1].close,r=d(e);l.strokeStyle="#2962FF",l.setLineDash([5,5]),l.lineWidth=1,l.beginPath(),l.moveTo(0,r),l.lineTo(t.width-60,r),l.stroke(),l.setLineDash([]),l.fillStyle="#2962FF",l.fillRect(t.width-60,r-10,60,20),l.fillStyle="#ffffff",l.textAlign="left",l.fillText(e.toFixed(2*(o<1)),t.width-55,r)}e=requestAnimationFrame(n)};return n(),()=>cancelAnimationFrame(e)},[c]);let k=()=>{b.current=!1,v.current=null,a.current&&(a.current.style.cursor="crosshair")};return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col bg-[#050505] text-white overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-4 py-2 border-b border-white/10 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("h2",{className:"text-sm font-bold text-gray-300",children:["Footprint Chart (",t,")"]}),(0,l.jsxs)("select",{className:"bg-[#111] text-gray-300 px-2 py-1 text-xs rounded border border-white/10 outline-none hover:border-white/20 transition-colors",value:c,onChange:e=>u(e.target.value),children:[(0,l.jsx)("option",{value:"1m",children:"1 Minute"}),(0,l.jsx)("option",{value:"5m",children:"5 Minutes"}),(0,l.jsx)("option",{value:"15m",children:"15 Minutes"}),(0,l.jsx)("option",{value:"1h",children:"1 Hour"}),(0,l.jsx)("option",{value:"4h",children:"4 Hours"}),(0,l.jsx)("option",{value:"1d",children:"1 Day"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"Drag to pan, Scroll to move, Ctrl+Scroll to zoom"}),(0,l.jsx)("button",{onClick:()=>{f.current=!d,h(!d)},className:"px-3 py-1 text-xs rounded font-medium transition-colors ".concat(d?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:d?"Auto Scroll: ON":"Auto Scroll: OFF"})]})]}),(0,l.jsx)("div",{ref:a,className:"flex-1 relative",onMouseDown:e=>{var t;let r=null==(t=a.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;l>r.width-60?v.current="zoomY":n>r.height-20?v.current="zoomX":v.current="pan",b.current=!0,y.current={x:e.clientX,y:e.clientY},f.current=!1,h(!1)},onMouseMove:e=>{var t;let r=null==(t=a.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;if(!b.current)return void(l>r.width-60?a.current.style.cursor="ns-resize":n>r.height-20?a.current.style.cursor="ew-resize":a.current.style.cursor="crosshair");let i=e.clientX-y.current.x,s=e.clientY-y.current.y;if("pan"===v.current){a.current.style.cursor="grabbing",g.current.x+=i;let e=s/p.current.y*x.current;g.current.y+=e}else"zoomY"===v.current?p.current.y=Math.max(1,Math.min(100,p.current.y*(1-.01*s))):"zoomX"===v.current&&(p.current.x=Math.max(10,Math.min(300,p.current.x*(1+.01*i))));y.current={x:e.clientX,y:e.clientY}},onMouseUp:k,onMouseLeave:k,onWheel:e=>{var t;e.preventDefault();let r=null==(t=a.current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,n=e.clientY-r.top;if(f.current=!1,h(!1),l>r.width-60){let t=e.deltaY>0?.9:1.1;p.current.y=Math.max(1,Math.min(100,p.current.y*t))}else if(n>r.height-20){let t=e.deltaY>0?.9:1.1;p.current.x=Math.max(10,Math.min(300,p.current.x*t))}else{let t=e.deltaY>0?.9:1.1;p.current.x=Math.max(10,Math.min(300,p.current.x*t))}},children:(0,l.jsx)("canvas",{ref:i,className:"absolute inset-0 block"})})]})};var u=r(9540),d=r(5229),h=r(906),f=r(5664);function m(){let[e,t]=(0,n.useState)("heatmap"),[r,i]=(0,n.useState)(!1);return(0,l.jsxs)("main",{className:"w-screen h-screen bg-[#050505] text-white flex flex-col overflow-hidden",children:[(0,l.jsxs)("header",{className:"px-6 py-3 border-b border-white/10 flex justify-between items-center bg-black/40 backdrop-blur-md z-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>i(!0),className:"p-1.5 hover:bg-white/10 rounded transition-colors text-gray-400 hover:text-white",children:(0,l.jsx)(u.A,{size:20})}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-emerald-500 rounded-sm shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),(0,l.jsx)("h1",{className:"text-lg font-medium tracking-tight font-sans",children:"heatmap"===e?"Order Flow Heatmap":"Footprint Chart"})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)("div",{className:"text-xs font-mono text-zinc-400 tracking-wider uppercase",children:"Bybit V5 WebSocket"})})]}),(0,l.jsx)("div",{className:"flex-1 relative",children:"heatmap"===e?(0,l.jsx)(a,{}):(0,l.jsx)(c,{symbol:"BTCUSDT",interval:"1m"})}),r&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center",onClick:()=>i(!1),children:(0,l.jsxs)("div",{className:"bg-[#131722] border border-white/10 rounded-xl w-80 overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-white/10 flex justify-between items-center bg-black/20",children:[(0,l.jsx)("h2",{className:"font-semibold text-gray-200",children:"Select View"}),(0,l.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:(0,l.jsx)(d.A,{size:18})})]}),(0,l.jsxs)("div",{className:"p-2 flex flex-col gap-1",children:[(0,l.jsxs)("button",{onClick:()=>{t("heatmap"),i(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat("heatmap"===e?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-gray-300"),children:[(0,l.jsx)(h.A,{size:18}),(0,l.jsx)("span",{className:"font-medium",children:"Order Flow Heatmap"})]}),(0,l.jsxs)("button",{onClick:()=>{t("footprint"),i(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat("footprint"===e?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-gray-300"),children:[(0,l.jsx)(f.A,{size:18}),(0,l.jsx)("span",{className:"font-medium",children:"Footprint Chart"})]})]})]})})]})}}},e=>{e.O(0,[718,441,255,358],()=>e(e.s=4569)),_N_E=e.O()}]);